<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  
     #include("/easyuiTemplate/head.html")
	<script>
	   // 权限控制使用到以下2个参数
  		var authLevel="${param.authLevel}";
  		var menuId="${param.menuId}";
  		// 
  		
  		$(function(){
	
		dataGrid = $('#dataGrid').datagrid({  
	        url: sysUtil.bp()+'/report/pageQuery',
	        fitColumns:true,
	      	border:true,
	        singleSelect:true,
	        fit:true,
	    	columnsfit:true,
	        pagination:true,
	        pageSize:16,
	        pageList:[16,50,100,200],
	        loadFilter:function(data){
	        	var dataMeta = [];
				if (data.success){
					var list = data.obj.rows;
					dataMeta['total'] = data.obj.total;
					dataMeta['rows'] = list;
					return dataMeta;
				}else{
					dataMeta['total'] = 0;
					dataMeta['rows'] = [];
					$.messager.show({
						title : '错误',
						msg : data.errMsg,
						timeout : 3000
					});
				}
	        },  
	        columns:[[
	            {field:'id',title:'ID',width:100,align:'center'},  
	            {field:'name',title:'报表名称',width:100,align:'center'},  
	  			{field:'code',title:'报表编号',width:100,align:'center'}
	        ]],
	        toolbar:[]
		});
		
		
		$('#select').live('click',function(){
        	var queryParams = $('#selectForm').form('serialize');
 			dataGrid.datagrid('options').queryParams= queryParams;   
 			dataGrid.data().datagrid.cache = null; 
			dataGrid.datagrid('load');
        });
		
		
}); 

  		
  		
  		
  	</script>
	
  </head>
  <body>
 <body class="easyui-layout" style="overflow:hidden" loadingMessage="请等待数据加载....." fit="true">
	  	<div region="center" border="true">
	  		 <form id="selectForm">
	  		 		<table style="font-size:12px;margin-left:10px;">
	  		 		<tr>
	  		 			<c:forEach items="${params}" var="param">
  		 					<td>${params.name}：</td>
	  						<td>
	  							<input name="${params.code}" type="text" class="easyui-validatebox" />
	  						</td>
	  		 			</c:forEach>
	  		 			<td>报表名称：</td>
	  					<td><input name="name" type="text" class="easyui-validatebox" /></td>
	  					<td>报表编号：</td>
	  					<td><input name="code" type="text"class="easyui-validatebox" /></td>
			  	 	 	<td><a href="javascript:void(0)" plain="true" id="select" class="easyui-linkbutton" iconCls="icon-search">查询</a> </td>
			  	 	 </tr>
	  		 	</table>
			  </form>
	  		<div style="width:98%;height:90%;margin:10 10 10 10">
		  		<table id="dataGrid" class="esayui"></table>
	  		</div>
		</div>
  </body>
</html>